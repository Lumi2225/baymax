<!DOCTYPE html>
<html lang="fr" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baymax ‚Äî Le bot qui simplifie ton Discord</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        :root {
            --violet-primary: #8b5cf6;
            --violet-dark: #6d28d9;
            --violet-light: #c084fc;
            --bg-light: #f8fafc;
            --bg-dark: #0f0f23;
            --text-light: #1e293b;
            --text-dark: #f1f5f9;
            --card-light: white;
            --card-dark: #1e1b4b;
            --border-light: #e2e8f0;
            --border-dark: #334155;
        }
        html.dark {
            --bg-light: var(--bg-dark);
            --bg-dark: var(--bg-light);
            --text-light: var(--text-dark);
            --text-dark: var(--text-light);
            --card-light: var(--card-dark);
            --card-dark: var(--card-light);
            --border-light: var(--border-dark);
            --border-dark: var(--border-light);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: var(--bg-light); 
            color: var(--text-light); 
            line-height: 1.6; 
            transition: all 0.3s ease; 
            overflow-x: hidden;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        header { 
            background: linear-gradient(135deg, var(--violet-primary), var(--violet-dark)); 
            color: white; 
            padding: 1rem 0; 
            position: fixed; 
            width: 100%; 
            top: 0; 
            z-index: 1000; 
            backdrop-filter: blur(10px);
        }
        nav { display: flex; justify-content: space-between; align-items: center; }
        .logo { 
            font-size: 1.8rem; 
            font-weight: 800; 
            display: flex; 
            align-items: center; 
            gap: 0.5rem;
        }
        .logo img { height: 40px; width: auto; }
        .nav-links { display: flex; list-style: none; gap: 2rem; }
        .nav-links a { 
            color: rgba(255,255,255,0.9); 
            text-decoration: none; 
            transition: all 0.3s;
            position: relative;
        }
        .nav-links a:hover { color: white; }
        .nav-links a::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; 
            background: white; transition: width 0.3s;
        }
        .nav-links a:hover::after { width: 100%; }
        .mode-toggle { 
            background: rgba(255,255,255,0.2); 
            border: none; 
            color: white; 
            padding: 0.7rem 1.2rem; 
            border-radius: 50px; 
            cursor: pointer; 
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }
        .mode-toggle:hover { background: rgba(255,255,255,0.3); transform: scale(1.05); }
        .user-status {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        .hero { 
            padding: 140px 0 100px; 
            text-align: center; 
            background: linear-gradient(135deg, var(--violet-primary), var(--violet-light)); 
            color: white;
            clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
        }
        .hero h1 { 
            font-size: clamp(2.5rem, 8vw, 4.5rem); 
            margin-bottom: 1rem; 
            font-weight: 900;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .slogan { 
            font-size: 1.5rem; 
            margin-bottom: 2.5rem; 
            opacity: 0.95; 
            font-weight: 300;
        }
        .btn { 
            background: rgba(255,255,255,0.95); 
            color: var(--violet-dark); 
            padding: 1.2rem 2.5rem; 
            border: none; 
            border-radius: 50px; 
            font-size: 1.1rem; 
            font-weight: 600;
            cursor: pointer; 
            text-decoration: none; 
            display: inline-block; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        .btn-secondary { background: rgba(255,255,255,0.2); color: white; }
        .btn-invite { 
            background: #5865f2; 
            color: white; 
            font-size: 1.2rem;
            padding: 1.3rem 3rem;
        }
        section { padding: 90px 0; }
        .section-title {
            text-align: center; 
            margin-bottom: 4rem; 
            font-size: 2.5rem; 
            font-weight: 700;
            background: linear-gradient(45deg, var(--violet-primary), var(--violet-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stats-grid, .team-grid, .testimonials-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 2rem; 
        }
        .card { 
            background: var(--card-light); 
            padding: 2.5rem 2rem; 
            border-radius: 24px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); 
            text-align: center; 
            border: 1px solid var(--border-light);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            height: 100%;
        }
        html.dark .card { 
            background: var(--card-dark); 
            border-color: var(--border-dark);
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 80px rgba(0,0,0,0.2);
        }
        .stat-number { 
            font-size: clamp(2.5rem, 8vw, 4rem); 
            font-weight: 900; 
            background: linear-gradient(45deg, var(--violet-primary), var(--violet-dark)); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        #baymax-avatar { 
            position: fixed; 
            right: 30px; 
            top: 180px; 
            width: 120px; 
            height: 120px; 
            border-radius: 24px; 
            z-index: 999; 
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); 
            animation: float 4s ease-in-out infinite;
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.4);
            cursor: pointer;
            background-size: cover;
            background-position: center;
            background-image: url('https://imagesend.fr/uploads/20260216/ce93becab46ea4b73c8b6217e9edb76fc00526e8.png');
        }
        @keyframes float { 
            0%, 100% { transform: translateY(0px) rotate(0deg); } 
            33% { transform: translateY(-15px) rotate(5deg); } 
            66% { transform: translateY(-8px) rotate(-3deg); }
        }
        .dashboard { display: none; }
        .dashboard.active { display: block; }
        .form-group { margin-bottom: 1.5rem; }
        input, textarea, select { 
            width: 100%; 
            padding: 1.2rem; 
            border: 2px solid var(--border-light); 
            border-radius: 16px; 
            font-size: 1rem;
            transition: all 0.3s;
            background: var(--card-light);
            color: var(--text-light);
        }
        html.dark input, html.dark textarea, html.dark select {
            background: var(--card-dark);
            color: var(--text-dark);
            border-color: var(--border-dark);
        }
        input:focus, textarea:focus { 
            outline: none; 
            border-color: var(--violet-primary); 
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.1);
        }
        .faq-item { 
            background: var(--card-light); 
            margin: 1rem 0; 
            padding: 1.5rem; 
            border-radius: 16px; 
            cursor: pointer; 
            border-left: 4px solid var(--violet-primary);
            transition: all 0.3s;
        }
        .faq-item:hover { transform: translateX(10px); }
        .faq-answer { display: none; margin-top: 1rem; }
        .score { 
            font-size: 3rem; 
            font-weight: 900; 
            color: var(--violet-primary); 
            margin: 2rem 0;
            text-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.8); 
            z-index: 2000; 
            justify-content: center; 
            align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: var(--card-light); 
            padding: 3rem; 
            border-radius: 24px; 
            max-width: 500px; 
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        html.dark .modal-content { background: var(--card-dark); }
        .close { 
            float: right; 
            font-size: 2rem; 
            cursor: pointer; 
            color: var(--text-light);
        }
        footer { 
            background: linear-gradient(135deg, var(--violet-dark), var(--violet-primary)); 
            color: white; 
            text-align: center; 
            padding: 3rem 0; 
            margin-top: 5rem;
            position: relative;
        }
        .hypixy-labs {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255,255,255,0.6);
            font-size: 0.9rem;
            opacity: 0.7;
        }
        .hypixy-labs img { height: 20px; width: auto; filter: brightness(0) invert(1); }
        @media (max-width: 768px) { 
            .nav-links { display: none; } 
            .hero h1 { font-size: 2.8rem; } 
            .container { padding: 0 15px; }
            #baymax-avatar { width: 80px; height: 80px; right: 15px; top: 160px; }
            .logo img { height: 32px; }
        }
    </style>
</head>
<body>
    <!-- Avatar Baymax flottant avec LOGO -->
    <div id="baymax-avatar" class="parallax" onclick="toggleDashboard()"></div>

    <!-- Header -->
    <header data-aos="fade-down">
        <nav class="container">
            <div class="logo">
                <img src="https://imagesend.fr/uploads/20260216/ce93becab46ea4b73c8b6217e9edb76fc00526e8.png" alt="Baymax Logo" loading="lazy">
                Baymax
            </div>
            <ul class="nav-links">
                <li><a href="#stats">Stats</a></li>
                <li><a href="#version">Version</a></li>
                <li><a href="#equipe">√âquipe</a></li>
                <li><a href="#temoignages">Avis</a></li>
                <li><a href="#faq">FAQ</a></li>
                <li><a href="#jeu">Jeu</a></li>
            </ul>
            <div>
                <button class="mode-toggle" onclick="toggleMode()" title="Mode sombre">
                    <i class="fas fa-moon"></i>
                </button>
                <span class="user-status" id="user-status">Non connect√©</span>
            </div>
        </nav>
    </header>

    <!-- Hero -->
    <section class="hero" data-aos="zoom-in">
        <div class="container">
            <h1>Baymax</h1>
            <p class="slogan">Le bot qui simplifie ton Discord</p>
            <div style="margin: 2rem 0;">
                <a href="https://discord.com/oauth2/authorize?client_id=YOUR_BOT_ID&scope=bot&permissions=8" 
                   class="btn btn-invite" target="_blank">
                    <i class="fab fa-discord"></i> Inviter Baymax
                </a>
            </div>
        </div>
    </section>

    <!-- Stats -->
    <section id="stats" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">Statistiques en temps r√©el</h2>
            <div class="stats-grid">
                <div class="card" data-aos="flip-left" data-aos-delay="100">
                    <div class="stat-number" data-target="3">0</div>
                    <p>Serveurs</p>
                </div>
                <div class="card" data-aos="flip-left" data-aos-delay="200">
                    <div class="stat-number" data-target="5421">-</div>
                    <p>Utilisateurs</p>
                </div>
                <div class="card" data-aos="flip-left" data-aos-delay="300">
                    <div class="stat-number" data-target="19">19ms</div>
                    <p>Ping moyen</p>
                </div>
                <div class="card" data-aos="flip-left" data-aos-delay="400">
                    <div class="stat-number" data-target="99.3">99.3%</div>
                    <p>Uptime</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Version -->
    <section id="version" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">Version Actuelle</h2>
            <div class="card" style="max-width: 700px; margin: 0 auto;" data-aos="zoom-in">
                <h3 style="color: var(--violet-primary); margin-bottom: 1.5rem;">üõ°Ô∏è Baymax v1.0.0 (Stable)</h3>
                <p style="font-size: 1.2rem; margin-bottom: 2rem;">Derni√®re mise √† jour: F√©vrier 2026</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div><i class="fas fa-shield-alt" style="color: var(--violet-primary); font-size: 2rem;"></i><br>Moderation</div>
                    <div><i class="fas fa-gamepad" style="color: var(--violet-primary); font-size: 2rem;"></i><br>Jeux & Fun</div>
                    <div><i class="fas fa-tools" style="color: var(--violet-primary); font-size: 2rem;"></i><br>Utilitaires</div>
                </div>
            </div>
        </div>
    </section>

    <!-- √âquipe -->
    <section id="equipe" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">L'√âquipe</h2>
            <div class="team-grid">
                <div class="card" data-aos="fade-right">
                    <div style="width: 100px; height: 100px; background: var(--violet-primary); border-radius: 50%; margin: 0 auto 1.5rem; display: flex; align-items: center; justify-content: center; font-size: 2.5rem;">
                        K
                    </div>
                    <h3 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Kua</h3>
                    <p style="color: var(--violet-primary); font-weight: 600; font-size: 1.1rem;">Fondateur & Lead Dev</p>
                </div>
                <div class="card" data-aos="fade-left">
                    <div style="width: 100px; height: 100px; background: var(--violet-primary); border-radius: 50%; margin: 0 auto 1.5rem; display: flex; align-items: center; justify-content: center; font-size: 2.5rem;">
                        F
                    </div>
                    <h3 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Flog</h3>
                    <p style="color: var(--violet-primary); font-weight: 600; font-size: 1.1rem;">Fondateur & Designer</p>
                </div>
            </div>
        </div>
    </section>

    <!-- T√©moignages -->
    <section id="temoignages" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">Ce qu'ils en pensent</h2>
            <div class="testimonials-grid" id="testimonials-grid">
                <!-- Avis charg√©s dynamiquement -->
            </div>
            <div style="text-align: center; margin-top: 3rem;">
                <button class="btn" onclick="openModal('review')">
                    <i class="fas fa-star"></i> Laisser un avis
                </button>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">FAQ</h2>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <strong>‚ùì Comment inviter Baymax ?</strong>
                <div class="faq-answer">Cliquez simplement sur le bouton "Inviter Baymax" en haut de la page !</div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <strong>‚ùì Quel est le pr√©fix ?</strong>
                <div class="faq-answer">Le pr√©fix par d√©faut est <code>!</code>. Pingez le bot pour le changer.</div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <strong>‚ùì Support technique ?</strong>
                <div class="faq-answer">Rejoignez notre serveur Discord officiel via le lien en haut !</div>
            </div>
        </div>
    </section>

    <!-- Suggestions -->
    <section id="suggestions" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">Am√©liore Baymax</h2>
            <div style="text-align: center;">
                <button class="btn btn-secondary" onclick="openModal('suggest')" style="font-size: 1.3rem; padding: 1.3rem 3rem;">
                    üí° Proposer une id√©e
                </button>
            </div>
        </div>
    </section>

    <!-- Jeu -->
    <section id="jeu" class="jeu" data-aos="zoom-in">
        <div class="container">
            <h2 class="section-title">Quiz Baymax</h2>
            <p id="question" style="font-size: 1.5rem; margin-bottom: 2rem;">Pr√™t pour tester tes connaissances ?</p>
            <button class="btn btn-invite" onclick="startGame()" id="startBtn">üöÄ Commencer le Quiz</button>
            <div class="score" id="score" style="display: none;">Score: <span id="scoreValue">0</span>/5</div>
            <div id="gameQuestion" style="display: none; margin-top: 2rem;"></div>
            <div id="gameAnswers" style="display: none; margin-top: 1.5rem;"></div>
        </div>
    </section>

    <!-- Dashboard -->
    <section id="dashboard" class="dashboard" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">Dashboard</h2>
            <div id="user-content">
                <div style="text-align: center; padding: 3rem;">
                    <i class="fas fa-lock" style="font-size: 4rem; color: var(--violet-primary); margin-bottom: 1rem;"></i>
                    <h3>Connectez-vous pour acc√©der</h3>
                    <p>Vos avis, suggestions et statistiques personnalis√©es</p>
                    <button class="btn" onclick="openModal('login')">Se connecter avec Supabase</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal Auth/Avis/Suggestions -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="modal-title">Connexion Supabase</h3>
            <form id="auth-form" style="margin-top: 1.5rem;">
                <div class="form-group">
                    <input type="email" id="email" placeholder="Votre email" required>
                </div>
                <button type="submit" class="btn btn-invite" style="width: 100%; margin-top: 1rem;">
                    Envoyer le lien magique ‚ú®
                </button>
            </form>
            <div id="modal-content-extra" style="margin-top: 2rem; display: none;"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer data-aos="fade-up">
        <div class="container">
            <p>&copy; 2026 Baymax par <strong>Kua & Flog</strong> | Tous droits r√©serv√©s</p>
            <p style="margin-top: 0.5rem; opacity: 0.8;">Fait avec ‚ù§Ô∏è pour la communaut√© Discord</p>
        </div>
        <div class="hypixy-labs">
            <img src="https://imagesend.fr/uploads/20260216/312fd31db4e2b92c2e9d33c6071ee835a34d42e3.png" alt="Hypixy Labs" loading="lazy">
            Hypixy Labs
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // üöÄ CONFIGUREZ SUPABASE ICI (OBLIGATOIRE)
        const SUPABASE_URL = 'https://pvkzubrifpanrxwgkrho.supabase.co';  // ‚Üê REMPLACEZ
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB2a3p1YnJpZnBhbnJ4d2drcmhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEyNDI0OTYsImV4cCI6MjA4NjgxODQ5Nn0.FXKO5y8igtqzNGDAew8L_3tJqOCmCnDcw_qpvRaVpLc';                       // ‚Üê REMPLACEZ
        
        let supabase;
        let currentUser = null;
        let isDark = false;
        let gameActive = false;
        let currentQuestion = 0;
        let score = 0;

        // Initialisation Supabase
        try {
            supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            console.log('‚úÖ Supabase connect√©');
        } catch (error) {
            console.error('‚ùå Supabase non configur√© - Mode d√©mo activ√©');
            supabase = {
                auth: {
                    signInWithOtp: () => ({ error: null }),
                    onAuthStateChange: (cb) => cb('noop', null),
                    signOut: () => {}
                },
                from: (table) => ({
                    select: () => ({  [] }),
                    insert: () => ({ error: null })
                })
            };
        }

        const questions = [
            { q: "Quel est le pr√©fix par d√©faut de Baymax ?", answers: ["!", "b!", "/"], correct: 0 },
            { q: "Qui sont les fondateurs ?", answers: ["Kua & Flog", "Pixel & Gameur", "Discord Team"], correct: 0 },
            { q: "Quel est le ping moyen ?", answers: ["19ms", "50ms", "120ms"], correct: 0 },
            { q: "Uptime actuel ?", answers: ["99.3%", "95%", "99.9%"], correct: 0 },
            { q: "Combien de serveurs actuellement ?", answers: ["3", "10", "100"], correct: 0 }
        ];

        // === SUPABASE AUTH ===
        supabase.auth.onAuthStateChange((event, session) => {
            currentUser = session?.user ?? null;
            updateUserStatus();
            if (currentUser) {
                loadUserContent();
                loadReviews();
            }
        });

        async function loadReviews() {
            try {
                const { data } = await supabase.from('reviews').select('content, rating, created_at, user_id').order('created_at', { ascending: false }).limit(5);
                const grid = document.getElementById('testimonials-grid');
                if (data && data.length > 0) {
                    grid.innerHTML = data.map(review => `
                        <div class="card" data-aos="flip-up">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">${'‚≠ê'.repeat(review.rating)}</div>
                            <p>"${review.content}"</p>
                            <div style="margin-top: 1.5rem; font-size: 0.9rem; opacity: 0.8;">@${review.user_id.slice(0,8)}...</div>
                        </div>
                    `).join('');
                } else {
                    grid.innerHTML = `
                        <div class="card" style="grid-column: 1/-1;">
                            <p style="opacity: 0.7;">Soyez le premier √† laisser un avis ! ‚≠ê</p>
                        </div>
                    `;
                }
            } catch (e) {
                console.log('Reviews non disponibles (tables √† cr√©er)');
                document.getElementById('testimonials-grid').innerHTML = `
                    <div class="card" style="grid-column: 1/-1;">
                        <p>Avis en direct via Supabase (configurez vos tables)</p>
                    </div>
                `;
            }
        }

        // === MODE SOMBRE ===
        function toggleMode() {
            isDark = !isDark;
            document.documentElement.classList.toggle('dark', isDark);
            const icon = document.querySelector('.mode-toggle i');
            icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
            localStorage.setItem('darkMode', isDark);
        }

        function updateUserStatus() {
            const status = document.getElementById('user-status');
            if (currentUser) {
                status.textContent = `Connect√©: ${currentUser.email.slice(0,15)}...`;
                status.style.background = 'rgba(34,197,94,0.3)';
            } else {
                status.textContent = 'Non connect√©';
                status.style.background = 'rgba(239,68,68,0.3)';
            }
        }

        if (localStorage.getItem('darkMode') === 'true') toggleMode();

        // === ANIMATIONS ===
        AOS.init({ duration: 1200, once: true });
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const avatar = document.getElementById('baymax-avatar');
            avatar.style.transform = `translateY(${scrolled * 0.3}px) scale(${1 + scrolled * 0.0001})`;
        });

        // Navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', e => {
                e.preventDefault();
                document.querySelector(anchor.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
            });
        });

        // === SUPABASE AUTH ===
        document.getElementById('auth-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            
            try {
                const { error } = await supabase.auth.signInWithOtp({
                    email,
                    options: { emailRedirectTo: window.location.origin }
                });
                if (!error) {
                    alert('‚úÖ V√©rifiez votre email pour le lien magique !');
                    closeModal();
                } else {
                    alert('‚ùå ' + error.message);
                }
            } catch (e) {
                alert('‚ö†Ô∏è Supabase non configur√© - Mode d√©mo');
                closeModal();
            }
        });

        // === MODALS ===
        function openModal(type) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const extra = document.getElementById('modal-content-extra');
            
            title.textContent = type === 'login' ? 'Connexion Supabase' : 
                               type === 'review' ? 'Laisser un avis' : 'üí° Suggestion';
            
            if (type === 'login') {
                extra.style.display = 'none';
            } else if (currentUser) {
                if (type === 'review') {
                    extra.innerHTML = `
                        <textarea id="review-text" placeholder="Votre avis..." rows="4"></textarea>
                        <select id="review-rating">
                            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent</option>
                            <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s bien</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê Bien</option>
                            <option value="2">‚≠ê‚≠ê Moyen</option>
                            <option value="1">‚≠ê Mauvais</option>
                        </select>
                        <button class="btn btn-invite" onclick="submitReview()" style="width:100%; margin-top:1rem;">Publier</button>
                    `;
                } else {
                    extra.innerHTML = `
                        <textarea id="suggest-text" placeholder="Votre id√©e..." rows="4"></textarea>
                        <button class="btn btn-invite" onclick="submitSuggestion()" style="width:100%; margin-top:1rem;">Envoyer</button>
                    `;
                }
                extra.style.display = 'block';
            } else {
                extra.innerHTML = '<p style="text-align:center; opacity:0.7;">üîê Connectez-vous pour continuer</p>';
                extra.style.display = 'block';
            }
            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            document.getElementById('modal-content-extra').style.display = 'none';
        }

        // === SUPABASE CRUD ===
        async function submitReview() {
            if (!currentUser) return alert('Connectez-vous !');
            const content = document.getElementById('review-text').value;
            const rating = parseInt(document.getElementById('review-rating').value);
            
            const { error } = await supabase.from('reviews').insert({
                content, rating, user_id: currentUser.id
            });
            
            if (!error) {
                alert('‚úÖ Avis publi√© !');
                closeModal();
                loadReviews();
            } else {
                alert('‚ùå ' + error.message);
            }
        }

        async function submitSuggestion() {
            if (!currentUser) return alert('Connectez-vous !');
            const content = document.getElementById('suggest-text').value;
            
            const { error } = await supabase.from('suggestions').insert({
                content, user_id: currentUser.id
            });
            
            if (!error) {
                alert('‚úÖ Suggestion envoy√©e !');
                closeModal();
            } else {
                alert('‚ùå ' + error.message);
            }
        }

        async function loadUserContent() {
            try {
                const {  reviews } = await supabase.from('reviews').select('*').eq('user_id', currentUser.id);
                const {  suggestions } = await supabase.from('suggestions').select('*').eq('user_id', currentUser.id);
                
                document.getElementById('user-content').innerHTML = `
                    <div style="text-align:center;">
                        <h3>Bonjour ${currentUser.email} !</h3>
                        <p>Vos donn√©es Supabase</p>
                        <div style="margin:2rem 0;">
                            <strong>Avis:</strong> ${reviews?.length || 0} | 
                            <strong>Suggestions:</strong> ${suggestions?.length || 0}
                        </div>
                        <button class="btn" onclick="logout()">D√©connexion</button>
                    </div>
                `;
            } catch (e) {
                document.getElementById('user-content').innerHTML = `
                    <div style="text-align:center;">
                        <h3>Connect√©: ${currentUser.email}</h3>
                        <p>Dashboard pr√™t (tables √† cr√©er)</p>
                        <button class="btn" onclick="logout()">D√©connexion</button>
                    </div>
                `;
            }
        }

        async function logout() {
            await supabase.auth.signOut();
            currentUser = null;
        }

        // === JEU ===
        function startGame() {
            gameActive = true;
            currentQuestion = 0;
            score = 0;
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('score').style.display = 'block';
            nextQuestion();
        }

        function nextQuestion() {
            if (currentQuestion >= questions.length) return endGame();
            const q = questions[currentQuestion];
            document.getElementById('gameQuestion').innerHTML = `<strong>${currentQuestion + 1}/5</strong> ${q.q}`;
            document.getElementById('gameQuestion').style.display = 'block';
            
            const answersHtml = q.answers.map((answer, i) => 
                `<button class="btn" onclick="checkAnswer(${i})" style="margin:0.5rem; padding:1rem 2rem;">${answer}</button>`
            ).join('');
            document.getElementById('gameAnswers').innerHTML = answersHtml;
            document.getElementById('gameAnswers').style.display = 'block';
        }

        function checkAnswer(selected) {
            const q = questions[currentQuestion];
            if (selected === q.correct) score++;
            document.getElementById('scoreValue').textContent = score;
            currentQuestion++;
            setTimeout(nextQuestion, 1000);
        }

        function endGame() {
            alert(`üéâ Quiz termin√© ! Score: ${score}/5`);
            location.reload();
        }

        // === UTILS ===
        function toggleFAQ(element) {
            const answer = element.querySelector('.faq-answer');
            answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
        }

        function toggleDashboard() {
            const dash = document.getElementById('dashboard');
            dash.classList.toggle('active');
            if (dash.classList.contains('active')) {
                dash.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function animateStats() {
            document.querySelectorAll('.stat-number').forEach(stat => {
                const target = stat.getAttribute('data-target');
                let current = 0;
                const timer = setInterval(() => {
                    current += 0.1;
                    if (current >= parseFloat(target)) {
                        stat.textContent = target;
                        clearInterval(timer);
                    } else {
                        stat.textContent = current.toFixed(1) + (target.includes('%') ? '%' : '');
                    }
                }, 30);
            });
        }

        let statsAnimated = false;
        window.addEventListener('scroll', () => {
            if (!statsAnimated && window.scrollY > 300) {
                animateStats();
                statsAnimated = true;
            }
        });

        // Chargement initial
        loadReviews();
    </script>
</body>
</html>
